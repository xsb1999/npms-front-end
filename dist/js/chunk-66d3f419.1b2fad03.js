(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-66d3f419"],{"3b3d":function(e,t,a){},"3d44":function(e,t,a){"use strict";a("3b3d")},a434:function(e,t,a){"use strict";var n=a("23e7"),o=a("23cb"),l=a("a691"),i=a("50c4"),c=a("7b0b"),r=a("65f0"),s=a("8418"),d=a("1dde"),u=d("splice"),p=Math.max,b=Math.min,m=9007199254740991,h="Maximum allowed length exceeded";n({target:"Array",proto:!0,forced:!u},{splice:function(e,t){var a,n,d,u,O,f,g=c(this),j=i(g.length),C=o(e,j),y=arguments.length;if(0===y?a=n=0:1===y?(a=0,n=j-C):(a=y-2,n=b(p(l(t),0),j-C)),j+a-n>m)throw TypeError(h);for(d=r(g,n),u=0;u<n;u++)O=C+u,O in g&&s(d,u,g[O]);if(d.length=n,a<n){for(u=C;u<j-n;u++)O=u+n,f=u+a,O in g?g[f]=g[O]:delete g[f];for(u=j;u>j-n+a;u--)delete g[u-1]}else if(a>n)for(u=j-n;u>C;u--)O=u+n-1,f=u+a-1,O in g?g[f]=g[O]:delete g[f];for(u=0;u<a;u++)g[u+C]=arguments[u+2];return g.length=j-n+a,d}})},b4c9:function(e,t,a){"use strict";a.r(t);var n=a("7a23"),o={class:"goods-list"},l=Object(n["p"])("div",{class:"clearfix"},[Object(n["p"])("span",{style:{"font-size":"20px"}},"Customer Relations Query")],-1),i={class:"content"},c={class:"content-header"},r=Object(n["o"])("Search"),s=Object(n["o"])("Reset"),d={class:"content-main"},u=Object(n["o"])("Relations"),p=Object(n["p"])("div",{class:"el-descriptions__title"},"Customer Contacts",-1),b=Object(n["p"])("br",null,null,-1),m=Object(n["p"])("div",{class:"el-descriptions__title"},"Customers Relations",-1),h=Object(n["p"])("br",null,null,-1);function O(e,t,a,O,f,g){var j=Object(n["P"])("el-input"),C=Object(n["P"])("el-col"),y=Object(n["P"])("el-option"),w=Object(n["P"])("el-select"),I=Object(n["P"])("el-button"),v=Object(n["P"])("el-form"),L=Object(n["P"])("el-row"),D=Object(n["P"])("el-table-column"),P=Object(n["P"])("el-table"),k=Object(n["P"])("el-pagination"),R=Object(n["P"])("el-card"),S=Object(n["P"])("dir"),_=Object(n["P"])("el-drawer"),x=Object(n["Q"])("loading");return Object(n["G"])(),Object(n["k"])(n["b"],null,[Object(n["p"])("div",o,[Object(n["p"])(R,{shadow:"never"},{header:Object(n["eb"])((function(){return[l]})),default:Object(n["eb"])((function(){return[Object(n["p"])("div",i,[Object(n["p"])("div",c,[Object(n["p"])(L,{style:{width:"100%"},gutter:"20"},{default:Object(n["eb"])((function(){return[Object(n["p"])(v,{model:f.keyword},{default:Object(n["eb"])((function(){return[Object(n["p"])(C,{span:4},{default:Object(n["eb"])((function(){return[Object(n["p"])(j,{modelValue:f.keyword.cusId,"onUpdate:modelValue":t[1]||(t[1]=function(e){return f.keyword.cusId=e}),placeholder:"enter the customer ID"},null,8,["modelValue"])]})),_:1}),Object(n["p"])(C,{span:4},{default:Object(n["eb"])((function(){return[Object(n["p"])(j,{modelValue:f.keyword.cusName,"onUpdate:modelValue":t[2]||(t[2]=function(e){return f.keyword.cusName=e}),placeholder:"enter the customer name"},null,8,["modelValue"])]})),_:1}),Object(n["p"])(C,{span:4},{default:Object(n["eb"])((function(){return[Object(n["p"])(w,{modelValue:f.keyword.cusSalesDeptId,"onUpdate:modelValue":t[3]||(t[3]=function(e){return f.keyword.cusSalesDeptId=e}),placeholder:"select the department",clearable:"true",onClear:t[4]||(t[4]=function(e){return f.keyword.cusSalesDeptId=null})},{default:Object(n["eb"])((function(){return[(Object(n["G"])(!0),Object(n["k"])(n["b"],null,Object(n["N"])(f.deptOptions,(function(e){return Object(n["G"])(),Object(n["k"])(y,{key:e.deptId,label:e.deptName,value:e.deptId},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"])]})),_:1}),Object(n["p"])(C,{span:4},{default:Object(n["eb"])((function(){return[Object(n["p"])(w,{modelValue:f.keyword.cusCustomerManagerId,"onUpdate:modelValue":t[5]||(t[5]=function(e){return f.keyword.cusCustomerManagerId=e}),placeholder:"select the manager",clearable:"true",onClear:t[6]||(t[6]=function(e){return g.clearCustomerManagerId()})},{default:Object(n["eb"])((function(){return[(Object(n["G"])(!0),Object(n["k"])(n["b"],null,Object(n["N"])(f.empOptions,(function(e){return Object(n["G"])(),Object(n["k"])(y,{key:e.empId,label:e.empName,value:e.empId},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"])]})),_:1}),Object(n["p"])(C,{span:4},{default:Object(n["eb"])((function(){return[Object(n["p"])(I,{type:"primary",onClick:t[7]||(t[7]=function(e){return g.getCustomers()}),style:{float:"left"}},{default:Object(n["eb"])((function(){return[r]})),_:1})]})),_:1}),Object(n["p"])(C,{span:4},{default:Object(n["eb"])((function(){return[Object(n["p"])(I,{type:"primary",onClick:t[8]||(t[8]=function(e){return g.getMainPage()})},{default:Object(n["eb"])((function(){return[s]})),_:1})]})),_:1})]})),_:1},8,["model"])]})),_:1})]),Object(n["p"])("div",d,[Object(n["fb"])(Object(n["p"])(P,{data:f.tableData,border:"",stripe:"",style:{width:"100%",margin:"1em 0","margin-top":"20px"},"element-loading-text":"Loading...","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"},{default:Object(n["eb"])((function(){return[Object(n["p"])(D,{prop:"cusId",label:"Customer Id",align:"center","show-overflow-tooltip":""}),Object(n["p"])(D,{prop:"cusName",label:"Customer Name",align:"center","show-overflow-tooltip":""}),Object(n["p"])(D,{prop:"cusProductType",label:"Product Type",align:"center","show-overflow-tooltip":""}),Object(n["p"])(D,{prop:"cusEnterpriseProperty",label:"Enterprise Property",align:"center","show-overflow-tooltip":""}),Object(n["p"])(D,{prop:"cusSalesDeptName",label:"Sales Department",align:"center","show-overflow-tooltip":""}),Object(n["p"])(D,{prop:"cusCustomerManagerName",label:"Customer Manager",align:"center","show-overflow-tooltip":""}),Object(n["p"])(D,{label:"Operations",align:"center",width:"210"},{default:Object(n["eb"])((function(e){return[Object(n["p"])(I,{size:"small",round:"",onClick:function(t){g.getCusDetail(e.$index),O.drawer=!0}},{default:Object(n["eb"])((function(){return[u]})),_:2},1032,["onClick"])]})),_:1})]})),_:1},8,["data"]),[[x,f.loading]]),Object(n["p"])(k,{onSizeChange:g.sizeChange,onCurrentChange:g.currentChange,layout:"total, sizes, prev, pager, next, jumper","current-page":e.currentPage,"page-sizes":e.pageSizes,"page-size":e.pageSize,total:f.total},null,8,["onSizeChange","onCurrentChange","current-page","page-sizes","page-size","total"])])])]})),_:1})]),Object(n["p"])(_,{modelValue:O.drawer,"onUpdate:modelValue":t[9]||(t[9]=function(e){return O.drawer=e}),"with-header":!1,direction:"rtl",size:"50%"},{default:Object(n["eb"])((function(){return[Object(n["p"])(S,{style:{padding:"1em"}},{default:Object(n["eb"])((function(){return[p,b,Object(n["p"])(P,{data:f.contactData,style:{width:"100%"},border:"","max-height":"400"},{default:Object(n["eb"])((function(){return[Object(n["p"])(D,{prop:"conName",label:"Name",align:"center"}),Object(n["p"])(D,{prop:"conDept",label:"Department",align:"center"}),Object(n["p"])(D,{prop:"conRole",label:"Role",align:"center"}),Object(n["p"])(D,{prop:"conLandlinePhone",label:"Landline Phone",align:"center"}),Object(n["p"])(D,{prop:"conMobilePhone",label:"Mobile Phone",align:"center"}),Object(n["p"])(D,{prop:"conFax",label:"Fax",align:"center"}),Object(n["p"])(D,{prop:"conEmail",label:"Email",align:"center"}),Object(n["p"])(D,{prop:"conQq",label:"QQ",align:"center"}),Object(n["p"])(D,{prop:"conWechat",label:"WeChat",align:"center"})]})),_:1},8,["data"])]})),_:1}),Object(n["p"])(S,{style:{padding:"1em"}},{default:Object(n["eb"])((function(){return[m,h,Object(n["p"])(P,{data:f.relationData,style:{width:"100%"},border:"","max-height":"400"},{default:Object(n["eb"])((function(){return[Object(n["p"])(D,{prop:"cusrelCusRelatedCusId",label:"Related Customer Id",align:"center",width:"180"}),Object(n["p"])(D,{prop:"cusrelCusRelatedCusName",label:"Related Customer Name",align:"center",width:"180"}),Object(n["p"])(D,{prop:"cusrelRelation",label:"Relations",align:"center"})]})),_:1},8,["data"])]})),_:1})]})),_:1},8,["modelValue"])],64)}var f=a("5530"),g=(a("a434"),a("3fd4")),j={setup:function(){var e=Object(n["K"])({currentPage:1,pageSizes:[10,20,50,100],pageSize:10,formLabelWidth:"180px",addCustomerFormVisible:!1,addContactFormVisible:!1,addContactFormItemVisible:!1,addRelatedFormVisible:!1,addRelatedFormItemVisible:!1});Object(n["D"])((function(){t()}));var t=function(){e.loading=!1};return Object(f["a"])(Object(f["a"])({},Object(n["W"])(e)),{},{drawer:Object(n["L"])(!1),init:t})},data:function(){return{tableData:[],total:0,loading:!0,emp_info:{empId:800123,empDeptId:8021140,empPositionId:30000030},currentIndex:-1,deptOptions:[],empOptions:[],cityProps:{expandTrigger:"hover"},keyword:{cusName:null,cusId:null,cusEnterpriseProperty:null,cusSalesDeptId:null,cusCustomerManagerId:null},countryOptions:[{lable:"China",value:"China"},{lable:"Italy",value:"Italy"}],provinceOptions:[],cityOptions:[],selectCountryId:0,selectProvinceId:0,chinaList:[{lable:"Liaoning",value:"Liaoning"},{lable:"Hebei",value:"Hebei"}],italyList:[{lable:"Lazio",value:"Lazio"},{lable:"Tuscany",value:"Tuscany"}],liaoningList:[{lable:"Shenyang",value:"Shenyang"},{lable:"Dalian",value:"Dalian"}],hebeiList:[{lable:"Baoding",value:"Baoding"},{lable:"Tangshan",value:"Tangshan"}],lazioList:[{lable:"Rome",value:"Rome"},{lable:"Latina",value:"Latina"}],tuscanyList:[{lable:"Florence",value:"Florence"},{lable:"Pisa",value:"Pisa"}],addCustomer:{},addContact:[],addRelated:[],addContactItem:[],addRelatedItem:[],addOrUpdateItemState:0,addOrUpdateState:0,addOrUpdateList:{},detailData:[],contactData:[],relationData:[]}},methods:{getMainPage:function(){var e=this;this.axios.get("http://localhost:8848/cusManagement/customer/getMainPage",{params:this.emp_info}).then((function(t){console.log(t.data),e.deptOptions=t.data.deptInfoList,e.empOptions=t.data.empInfoList,e.keyword.cusCustomerManagerId=e.empOptions[0].empId,e.tableData=t.data.cusSearchResultList,e.total=e.tableData.length,e.loading=!1}))},getCusDetail:function(e){var t=this,a=this.tableData[e];this.axios.get("http://localhost:8848/cusManagement/customer/getCusDetail",{params:{cusId:a.cusId}}).then((function(e){console.log(e.data),t.detailData=e.data.customer,t.contactData=e.data.contactList,t.relationData=e.data.relationList}))},getCusEdit:function(e){var t=this,a=this.tableData[e];this.axios.get("http://localhost:8848/cusManagement/customer/getCusDetail",{params:{cusId:a.cusId}}).then((function(e){console.log(e.data),t.addCustomer=e.data.customer,t.addContact=e.data.contactList,t.addRelated=e.data.relationList}))},getCustomers:function(){var e=this;console.log(this.keyword),this.axios.post("http://localhost:8848/cusManagement/customer/getCustomers",this.keyword).then((function(t){console.log(t.data),e.tableData=t.data,e.loading=!1,e.total=e.tableData.length}))},clearCustomerManagerId:function(){this.empOptions.length>1?this.keyword.cusCustomerManagerId=null:this.keyword.cusCustomerManagerId=this.empOptions[0].empId},finish:function(){var e=this;this.addCustomer.cusSalesDeptId=this.emp_info.empDeptId,this.addCustomer.cusCustomerManagerId=this.emp_info.empId,console.log(this.addCustomer),console.log(this.addContact),console.log(this.addRelated),0==this.addOrUpdateState&&this.axios.post("/npmsBackEndServer/cusManagement/customer/addCustomers",{customer:this.addCustomer,contactList:this.addContact,relationList:this.addRelated}).then((function(t){console.log(t.data),e.notification(t.data)})),1==this.addOrUpdateState&&this.axios.post("/npmsBackEndServer/cusManagement/customer/updateCustomers",{customer:this.addCustomer,contactList:this.addContact,relationList:this.addRelated}).then((function(t){console.log(t.data),e.notification(t.data)}))},handleClick:function(e){console.log(e)},query:function(){},addOrUpdate:function(){0==this.addOrUpdateState&&(this.addOrUpdateList={customerTitle:"New Customer-Primary Information",contactListTitle:"New Customer-Customer Contacts",contactItemTitle:"New Customer-Add Customer Contact",relatedListTitle:"New Customer-Related Customers",relatedItemTitle:"New Customer-Add Related Customers"}),1==this.addOrUpdateState&&(this.addOrUpdateList={customerTitle:"Edit Customer-Primary Information",contactListTitle:"Edit Customer-Customer Contacts",contactItemTitle:"Edit Customer-Add Customer Contact",relatedListTitle:"Edit Customer-Related Customers",relatedItemTitle:"Edit Customer-Add Related Customers"})},sizeChange:function(e){this.pageSize=e},currentChange:function(e){this.currentPage=e},deleteRow:function(e,t){g["a"].confirm("Data will be deleted. Continue?","Notification",{confirmButtonText:"Confirm",cancelButtonText:"Cancel",type:"warning",callback:function(a){"confirm"==a&&(t.splice(e,1),Object(g["b"])({title:"System Notification",message:"Delete Successfully！",duration:2e3,type:"success"}))}})},addRow:function(e,t){var a=e.length;e.splice(a,0,t)},updateRow:function(e,t,a){t.splice(e,1),t.splice(e,0,a)},addOrUpdateItem:function(e,t){0==this.addOrUpdateItemState&&(this.addRow(e,t),t=[]),1==this.addOrUpdateItemState&&(this.updateRow(this.currentIndex,e,t),t=[])},selectCountry:function(e){"China"==e&&(this.provinceOptions=this.chinaList),"Italy"==e&&(this.provinceOptions=this.italyList)},selectProvince:function(e,t){"China"==e&&("Liaoning"==t&&(this.cityOptions=this.liaoningList),"Hebei"==t&&(this.cityOptions=this.hebeiList)),"Italy"==e&&("Lazio"==t&&(this.cityOptions=this.lazioList),"Tuscany"==t&&(this.cityOptions=this.tuscanyList))},notification:function(e){Object(g["b"])({title:"System Notification",message:e,duration:2e3,type:"success"})}}};a("3d44");j.render=O;t["default"]=j}}]);