(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5b3b6caa"],{a434:function(e,t,a){"use strict";var n=a("23e7"),l=a("23cb"),c=a("a691"),r=a("50c4"),o=a("7b0b"),i=a("65f0"),u=a("8418"),b=a("1dde"),p=b("splice"),d=Math.max,s=Math.min,O=9007199254740991,j="Maximum allowed length exceeded";n({target:"Array",proto:!0,forced:!p},{splice:function(e,t){var a,n,b,p,f,g,m=o(this),h=r(m.length),v=l(e,h),D=arguments.length;if(0===D?a=n=0:1===D?(a=0,n=h-v):(a=D-2,n=s(d(c(t),0),h-v)),h+a-n>O)throw TypeError(j);for(b=i(m,n),p=0;p<n;p++)f=v+p,f in m&&u(b,p,m[f]);if(b.length=n,a<n){for(p=v;p<h-n;p++)f=p+n,g=p+a,f in m?m[g]=m[f]:delete m[g];for(p=h;p>h-n+a;p--)delete m[p-1]}else if(a>n)for(p=h-n;p>v;p--)f=p+n-1,g=p+a-1,f in m?m[g]=m[f]:delete m[g];for(p=0;p<a;p++)m[p+v]=arguments[p+2];return m.length=h-n+a,b}})},c325:function(e,t,a){"use strict";a.r(t);var n=a("7a23"),l={class:"goods-add"},c=Object(n["p"])("div",{class:"clearfix"},[Object(n["p"])("span",{style:{"font-size":"20px"}},"Customer Handover")],-1),r={class:"content"},o={class:"content-header"},i=Object(n["p"])("span",null,"Handover:",-1),u=Object(n["p"])("br",null,null,-1),b=Object(n["o"])("Search"),p=Object(n["o"])("Reset"),d={class:"content-main"},s=Object(n["o"])("More"),O=Object(n["o"])("Opportunity"),j=Object(n["o"])("Handover"),f={class:"content-header"},g=Object(n["p"])("span",null,"Reciever:",-1),m=Object(n["p"])("br",null,null,-1),h=Object(n["o"])("Submit"),v={class:"content-main"},D=Object(n["o"])("More"),C=Object(n["o"])("Opportunity"),w=Object(n["o"])("Backout"),y=Object(n["p"])("div",{class:"el-descriptions__title"},"Customer Contact Information",-1),_=Object(n["p"])("br",null,null,-1),I=Object(n["p"])("div",{class:"el-descriptions__title"},"Related Customers List",-1),k=Object(n["p"])("br",null,null,-1),V=Object(n["o"])("Sub Opportunity"),S={class:"dialog-footer"},x=Object(n["o"])("Back"),L={class:"dialog-footer"},P=Object(n["o"])("Back");function N(e,t,a,N,M,T){var B=Object(n["P"])("el-row"),R=Object(n["P"])("el-input"),z=Object(n["P"])("el-col"),E=Object(n["P"])("el-option"),A=Object(n["P"])("el-select"),G=Object(n["P"])("el-button"),U=Object(n["P"])("el-form"),$=Object(n["P"])("el-table-column"),H=Object(n["P"])("el-table"),W=Object(n["P"])("el-card"),Q=Object(n["P"])("el-descriptions-item"),F=Object(n["P"])("el-descriptions"),J=Object(n["P"])("dir"),q=Object(n["P"])("el-drawer"),K=Object(n["P"])("el-dialog"),X=Object(n["Q"])("loading");return Object(n["G"])(),Object(n["k"])(n["b"],null,[Object(n["p"])("div",l,[Object(n["p"])(W,{shadow:"never"},{header:Object(n["eb"])((function(){return[c]})),default:Object(n["eb"])((function(){return[Object(n["p"])("div",r,[Object(n["p"])(B,{gutter:"100"},{default:Object(n["eb"])((function(){return[Object(n["p"])(z,{span:12},{default:Object(n["eb"])((function(){return[Object(n["p"])("div",o,[Object(n["p"])(B,null,{default:Object(n["eb"])((function(){return[i]})),_:1}),u,Object(n["p"])(B,{style:{width:"100%"},gutter:"20"},{default:Object(n["eb"])((function(){return[Object(n["p"])(U,{model:M.keyword},{default:Object(n["eb"])((function(){return[Object(n["p"])(z,{span:5},{default:Object(n["eb"])((function(){return[Object(n["p"])(R,{modelValue:M.keyword.cusName,"onUpdate:modelValue":t[1]||(t[1]=function(e){return M.keyword.cusName=e}),placeholder:"Customer name"},null,8,["modelValue"])]})),_:1}),Object(n["p"])(z,{span:5},{default:Object(n["eb"])((function(){return[Object(n["p"])(A,{modelValue:M.keyword.cusSalesDeptId,"onUpdate:modelValue":t[2]||(t[2]=function(e){return M.keyword.cusSalesDeptId=e}),placeholder:"Department",clearable:"true",onClear:t[3]||(t[3]=function(e){return M.keyword.cusSalesDeptId=null})},{default:Object(n["eb"])((function(){return[(Object(n["G"])(!0),Object(n["k"])(n["b"],null,Object(n["N"])(M.deptOptions,(function(e){return Object(n["G"])(),Object(n["k"])(E,{key:e.deptId,label:e.deptName,value:e.deptId},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"])]})),_:1}),Object(n["p"])(z,{span:5},{default:Object(n["eb"])((function(){return[Object(n["p"])(A,{modelValue:M.keyword.cusCustomerManagerId,"onUpdate:modelValue":t[4]||(t[4]=function(e){return M.keyword.cusCustomerManagerId=e}),placeholder:"Manager",clearable:"true",onClear:t[5]||(t[5]=function(e){M.keyword.cusCustomerManagerId=null})},{default:Object(n["eb"])((function(){return[(Object(n["G"])(!0),Object(n["k"])(n["b"],null,Object(n["N"])(M.empOptions,(function(e){return Object(n["G"])(),Object(n["k"])(E,{key:e.empId,label:e.empName,value:e.empId},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"])]})),_:1}),Object(n["p"])(z,{span:4},{default:Object(n["eb"])((function(){return[Object(n["p"])(G,{type:"primary",onClick:t[6]||(t[6]=function(e){return T.searchOutCusInfo()})},{default:Object(n["eb"])((function(){return[b]})),_:1})]})),_:1}),Object(n["p"])(z,{span:4},{default:Object(n["eb"])((function(){return[Object(n["p"])(G,{type:"primary",onClick:t[7]||(t[7]=function(e){return T.getHandoverPage()})},{default:Object(n["eb"])((function(){return[p]})),_:1})]})),_:1})]})),_:1},8,["model"])]})),_:1})]),Object(n["p"])("div",d,[Object(n["fb"])(Object(n["p"])(H,{data:M.tableData,border:"",stripe:"",style:{width:"100%",margin:"1em 0","margin-top":"20px"},"element-loading-text":"Loading...","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"},{default:Object(n["eb"])((function(){return[Object(n["p"])($,{prop:"cusId",label:"Customer Id",align:"center","show-overflow-tooltip":""}),Object(n["p"])($,{prop:"cusName",label:"Customer Name",align:"center","show-overflow-tooltip":""}),Object(n["p"])($,{prop:"cusSalesDeptName",label:"Sales Department",align:"center","show-overflow-tooltip":"",width:"150"}),Object(n["p"])($,{label:"Operations",align:"center",width:"300"},{default:Object(n["eb"])((function(e){return[Object(n["p"])(G,{size:"small",round:"",onClick:function(t){T.getCusDetail(M.tableData[e.$index]),M.drawer=!0}},{default:Object(n["eb"])((function(){return[s]})),_:2},1032,["onClick"]),Object(n["p"])(G,{size:"small",round:"",onClick:function(t){T.getOppByCusId(M.tableData[e.$index]),M.oppListVisible=!0}},{default:Object(n["eb"])((function(){return[O]})),_:2},1032,["onClick"]),Object(n["p"])(G,{size:"small",round:"",onClick:function(t){return T.deliverRow(e.$index,M.tableData,M.recieverData)}},{default:Object(n["eb"])((function(){return[j]})),_:2},1032,["onClick"])]})),_:1})]})),_:1},8,["data"]),[[X,M.loading]])])]})),_:1}),Object(n["p"])(z,{span:12},{default:Object(n["eb"])((function(){return[Object(n["p"])("div",f,[Object(n["p"])(B,null,{default:Object(n["eb"])((function(){return[g]})),_:1}),m,Object(n["p"])(B,{style:{width:"100%"},gutter:"20"},{default:Object(n["eb"])((function(){return[Object(n["p"])(U,{model:M.receiver},{default:Object(n["eb"])((function(){return[Object(n["p"])(z,{span:7},{default:Object(n["eb"])((function(){return[Object(n["p"])(A,{modelValue:M.receiver.cusSalesDeptId,"onUpdate:modelValue":t[8]||(t[8]=function(e){return M.receiver.cusSalesDeptId=e}),placeholder:"Department"},{default:Object(n["eb"])((function(){return[(Object(n["G"])(!0),Object(n["k"])(n["b"],null,Object(n["N"])(M.deptOptions,(function(e){return Object(n["G"])(),Object(n["k"])(E,{key:e.deptId,label:e.deptName,value:e.deptId},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"])]})),_:1}),Object(n["p"])(z,{span:7},{default:Object(n["eb"])((function(){return[Object(n["p"])(A,{modelValue:M.receiver.cusCustomerManagerId,"onUpdate:modelValue":t[9]||(t[9]=function(e){return M.receiver.cusCustomerManagerId=e}),placeholder:"Manager"},{default:Object(n["eb"])((function(){return[(Object(n["G"])(!0),Object(n["k"])(n["b"],null,Object(n["N"])(M.empOptions,(function(e){return Object(n["G"])(),Object(n["k"])(E,{key:e.empId,label:e.empName,value:e.empId},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"])]})),_:1}),Object(n["p"])(z,{span:4},{default:Object(n["eb"])((function(){return[Object(n["p"])(G,{type:"primary",onClick:t[10]||(t[10]=function(e){return T.handover()})},{default:Object(n["eb"])((function(){return[h]})),_:1})]})),_:1})]})),_:1},8,["model"])]})),_:1})]),Object(n["p"])("div",v,[Object(n["p"])(H,{data:M.recieverData,border:"",stripe:"",style:{width:"100%",margin:"1em 0","margin-top":"20px"}},{default:Object(n["eb"])((function(){return[Object(n["p"])($,{prop:"cusId",label:"Customer Id",align:"center","show-overflow-tooltip":""}),Object(n["p"])($,{prop:"cusName",label:"Customer Name",align:"center","show-overflow-tooltip":""}),Object(n["p"])($,{prop:"cusSalesDeptName",label:"Sales Department",align:"center","show-overflow-tooltip":"",width:"150"}),Object(n["p"])($,{label:"Operations",align:"center",width:"300"},{default:Object(n["eb"])((function(e){return[Object(n["p"])(G,{size:"small",round:"",onClick:function(t){T.getCusDetail(M.recieverData[e.$index]),M.drawer=!0}},{default:Object(n["eb"])((function(){return[D]})),_:2},1032,["onClick"]),Object(n["p"])(G,{size:"small",round:"",onClick:function(t){T.getOppByCusId(M.recieverData[e.$index]),M.oppListVisible=!0}},{default:Object(n["eb"])((function(){return[C]})),_:2},1032,["onClick"]),Object(n["p"])(G,{size:"small",round:"",onClick:function(t){return T.deliverRow(e.$index,M.recieverData,M.tableData)}},{default:Object(n["eb"])((function(){return[w]})),_:2},1032,["onClick"])]})),_:1})]})),_:1},8,["data"])])]})),_:1})]})),_:1})])]})),_:1})]),Object(n["p"])(q,{title:"Customer Details",modelValue:M.drawer,"onUpdate:modelValue":t[11]||(t[11]=function(e){return M.drawer=e}),"with-header":!1,direction:"rtl",size:"50%"},{default:Object(n["eb"])((function(){return[Object(n["p"])(F,{title:"Customer Primary Information",column:2,border:"",style:{margin:"1em"}},{default:Object(n["eb"])((function(){return[Object(n["p"])(Q,{label:"Customer Id","label-align":"right",align:"center"},{default:Object(n["eb"])((function(){return[Object(n["o"])(Object(n["T"])(M.detailData.cusId),1)]})),_:1}),Object(n["p"])(Q,{label:"Customer Name","label-align":"right",align:"center"},{default:Object(n["eb"])((function(){return[Object(n["o"])(Object(n["T"])(M.detailData.cusName),1)]})),_:1}),Object(n["p"])(Q,{label:"Country","label-align":"right",align:"center"},{default:Object(n["eb"])((function(){return[Object(n["o"])(Object(n["T"])(M.detailData.cusCountry),1)]})),_:1}),Object(n["p"])(Q,{label:"City","label-align":"right",align:"center"},{default:Object(n["eb"])((function(){return[Object(n["o"])(Object(n["T"])(M.detailData.cusCity),1)]})),_:1}),Object(n["p"])(Q,{label:"Address","label-align":"right",align:"center"},{default:Object(n["eb"])((function(){return[Object(n["o"])(Object(n["T"])(M.detailData.cusAddress),1)]})),_:1}),Object(n["p"])(Q,{label:"Postcode","label-align":"right",align:"center"},{default:Object(n["eb"])((function(){return[Object(n["o"])(Object(n["T"])(M.detailData.cusPostcode),1)]})),_:1}),Object(n["p"])(Q,{label:"Taxpayer Id","label-align":"right",align:"center"},{default:Object(n["eb"])((function(){return[Object(n["o"])(Object(n["T"])(M.detailData.cusTaxpayerId),1)]})),_:1}),Object(n["p"])(Q,{label:"Tax Category","label-align":"right",align:"center"},{default:Object(n["eb"])((function(){return[Object(n["o"])(Object(n["T"])(M.detailData.cusTaxCategory),1)]})),_:1}),Object(n["p"])(Q,{label:"Account Allocation Section","label-align":"right",align:"center"},{default:Object(n["eb"])((function(){return[Object(n["o"])(Object(n["T"])(M.detailData.cusAccountAllocationSection),1)]})),_:1}),Object(n["p"])(Q,{label:"Enterprise Property","label-align":"right",align:"center"},{default:Object(n["eb"])((function(){return[Object(n["o"])(Object(n["T"])(M.detailData.cusEnterpriseProperty),1)]})),_:1}),Object(n["p"])(Q,{label:"Annual Sales Revenue","label-align":"right",align:"center"},{default:Object(n["eb"])((function(){return[Object(n["o"])(Object(n["T"])(M.detailData.cusAnnualSalesRevenue),1)]})),_:1}),Object(n["p"])(Q,{label:"Product Type","label-align":"right",align:"center"},{default:Object(n["eb"])((function(){return[Object(n["o"])(Object(n["T"])(M.detailData.cusProductType),1)]})),_:1}),Object(n["p"])(Q,{label:"Software Brand","label-align":"right",align:"center"},{default:Object(n["eb"])((function(){return[Object(n["o"])(Object(n["T"])(M.detailData.cusSoftwareBrand),1)]})),_:1}),Object(n["p"])(Q,{label:"Website","label-align":"right",align:"center"},{default:Object(n["eb"])((function(){return[Object(n["o"])(Object(n["T"])(M.detailData.cusWebsite),1)]})),_:1}),Object(n["p"])(Q,{label:"Effect of Informationization","label-align":"right",align:"center"},{default:Object(n["eb"])((function(){return[Object(n["o"])(Object(n["T"])(M.detailData.cusEffectOfInformationization),1)]})),_:1})]})),_:1}),Object(n["p"])(J,{style:{padding:"1em"}},{default:Object(n["eb"])((function(){return[y,_,Object(n["p"])(H,{data:M.contactData,style:{width:"100%"},border:"","max-height":"163"},{default:Object(n["eb"])((function(){return[Object(n["p"])($,{prop:"conName",label:"Name",align:"center"}),Object(n["p"])($,{prop:"conDept",label:"Department",align:"center"}),Object(n["p"])($,{prop:"conRole",label:"Role",align:"center"}),Object(n["p"])($,{prop:"conLandlinePhone",label:"Landline Phone",align:"center"}),Object(n["p"])($,{prop:"conMobilePhone",label:"Mobile Phone",align:"center"}),Object(n["p"])($,{prop:"conFax",label:"Fax",align:"center"}),Object(n["p"])($,{prop:"conEmail",label:"Email",align:"center"}),Object(n["p"])($,{prop:"conQq",label:"QQ",align:"center"}),Object(n["p"])($,{prop:"conWechat",label:"WeChat",align:"center"})]})),_:1},8,["data"])]})),_:1}),Object(n["p"])(J,{style:{padding:"1em"}},{default:Object(n["eb"])((function(){return[I,k,Object(n["p"])(H,{data:M.relationData,style:{width:"100%"},border:"","max-height":"163"},{default:Object(n["eb"])((function(){return[Object(n["p"])($,{prop:"cusrelCusRelatedCusId",label:"Related Customer Id",align:"center",width:"180"}),Object(n["p"])($,{prop:"cusrelCusRelatedCusName",label:"Related Customer Name",align:"center",width:"180"}),Object(n["p"])($,{prop:"cusrelRelation",label:"Relations",align:"center"})]})),_:1},8,["data"])]})),_:1})]})),_:1},8,["modelValue"]),Object(n["p"])(K,{modelValue:M.oppListVisible,"onUpdate:modelValue":t[13]||(t[13]=function(e){return M.oppListVisible=e})},{footer:Object(n["eb"])((function(){return[Object(n["p"])("span",S,[Object(n["p"])(G,{type:"primary",onClick:t[12]||(t[12]=function(e){return M.oppListVisible=!1})},{default:Object(n["eb"])((function(){return[x]})),_:1})])]})),default:Object(n["eb"])((function(){return[Object(n["p"])(H,{data:M.oppList,border:""},{default:Object(n["eb"])((function(){return[Object(n["p"])($,{prop:"oppId",label:"Opportunity Id",align:"center","show-overflow-tooltip":""}),Object(n["p"])($,{prop:"oppName",label:"Opportunity Name",align:"center","show-overflow-tooltip":""}),Object(n["p"])($,{label:"Operations",align:"center",width:"200"},{default:Object(n["eb"])((function(e){return[Object(n["p"])(G,{size:"small",round:"",onClick:function(t){T.showOppDetail(M.oppList[e.$index]),M.oppDetailVisible=!0}},{default:Object(n["eb"])((function(){return[V]})),_:2},1032,["onClick"])]})),_:1})]})),_:1},8,["data"])]})),_:1},8,["modelValue"]),Object(n["p"])(K,{modelValue:M.oppDetailVisible,"onUpdate:modelValue":t[15]||(t[15]=function(e){return M.oppDetailVisible=e})},{footer:Object(n["eb"])((function(){return[Object(n["p"])("span",L,[Object(n["p"])(G,{type:"primary",onClick:t[14]||(t[14]=function(e){return M.oppListVisible=!1})},{default:Object(n["eb"])((function(){return[P]})),_:1})])]})),_:1},8,["modelValue"])],64)}a("a434");var M={data:function(){return{currentPage:1,pageSizes:[10,20,50,100],pageSize:10,formLabelWidth:"180px",keyword:{cusName:null,cusSalesDeptId:null,cusCustomerManagerId:null},tableData:[],total:"",loading:!0,deptOptions:[],empOptions:[],drawer:!1,detailData:{},contactData:[],relationData:[],oppListVisible:!1,oppList:[],oppDetailVisible:!1,oppData:{},subOppList:[],competitorList:[],payerList:[],receiver:{cusSalesDeptId:null,cusCustomerManagerId:null},recieverData:[]}},methods:{getHandoverPage:function(){var e=this;this.axios.get("/npmsBackEndServer/cusManagement/handoverlog/getHandoverPage",{params:{}}).then((function(t){console.log(t.data),e.deptOptions=t.data.deptInfoList,e.empOptions=t.data.empInfoList,e.keyword.cusCustomerManagerId=e.empOptions[0].empId,e.total=e.tableData.length,e.loading=!1}))},searchOutCusInfo:function(){var e=this;console.log(this.keyword),this.axios.post("/npmsBackEndServer/cusManagement/handoverlog/searchOutCusInfo",this.keyword).then((function(t){console.log(t.data),e.tableData=t.data,e.getDeptName(),e.loading=!1,e.total=e.tableData.length}))},getDeptName:function(){for(var e=0;e<this.tableData.length;e++)for(var t=0;t<this.deptOptions.length;t++)this.tableData[e].cusSalesDeptId==this.deptOptions[t].deptId&&(this.tableData[e].cusSalesDeptName=this.deptOptions[t].deptName)},getCusDetail:function(e){var t=this;this.axios.get("/npmsBackEndServer/cusManagement/customer/getCusDetail",{params:{cusId:e.cusId}}).then((function(e){console.log(e.data),t.detailData=e.data.customer,t.contactData=e.data.contactList,t.relationData=e.data.relationList}))},showOppDetail:function(e){var t=this;this.axios.get("/npmsBackEndServer/cusManagement/handoverlog/showOppDetail",{params:{cusId:e.oppId}}).then((function(e){console.log(e.data),t.oppData=e.data.OpportunityBasicInfo,t.subOppList=e.data.subOpportunityList,t.competitorList=e.data.competitorList,t.payerList=e.data.payerList}))},getOppByCusId:function(e){var t=this;this.axios.get("/npmsBackEndServer/cusManagement/handoverlog/getOppByCusId",{params:{cusId:e.cusId}}).then((function(e){console.log(e.data),t.oppList=e.data}))},handover:function(){var e=this;console.log(this.receiver),console.log(this.receiverData),this.axios.post("/npmsBackEndServer/cusManagement/handoverlog/handover",{outDeptId:this.keyword.cusSalesDeptId,outCusMgrId:this.keyword.cusCustomerManagerId,inDeptId:this.receiver.cusSalesDeptId,inCusMgrId:this.receiver.cusCustomerManagerId,customerList:this.recieverData}).then((function(t){console.log(t.data),e.recieverData=[]}))},deliverRow:function(e,t,a){var n=t[e],l=a.length;a.splice(l,0,n),t.splice(e,1)}}};M.render=N;t["default"]=M}}]);